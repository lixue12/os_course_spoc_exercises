# 操作系统概述
---
## 使用在线平台
- http://166.111.68.197:11123/oscourse/OS2016spring

## 了解学习方法
```
  for (i=1; i<=13; i++) {
    1. 完成第i周课前视频学习
    2. 完成第i周基本练习
    3. 上SPOC课并完成课上练习
    4. 在deadline前，按序完成ucore_lab实验
    5. if (i==7) 参加期中考试;
    6. if (i==13) 参加期末考试;
    7. if (碰到问题)　到piazza的论坛上提问;
   }
```
## 了解学生对视频学习的情况

## 介绍v9-cpu
 - https://github.com/chyyuu/v9-cpu/blob/master/doc/cpu.md

## 课堂练习
　- 提交到piazza上

# 操作系统概述思考题
---
## 个人思考题
---

分析你所认识的操作系统（Windows、Linux、FreeBSD、Android、iOS）所具有的独特和共性的功能？

>  共性：都是最基本的系统软件，方便人们操作计算机的接口，给用户提供图形界面，作为最底层的软件对于其他所有应用软件提供支持，控制各程序的运行，管理硬件、软件、数据等等。

>  Linux独特功能：开源，完全免费，安全性强。方便命令行操作，适合程序员使用。

>  Windows独特功能：界面美观，操作方便，支持很多外部设备和外部程序。

>  iOS独特功能：流畅，美观，人性化，易于操作，但是非常封闭，只支持AppStore里面的应用程序

>  Android独特功能：开放性好

>  FreeBSD独特功能：基本系统包括很多工具

请总结你认为操作系统应该具有的特征有什么？并对其特征进行简要阐述。

>   并发性：为每个程序建立进程，使得一段时间内可以同时执行多个程序（每一时刻仅执行一道程序，交替执行）。

>   共享性：系统中的资源可供内存中并发执行的多个进程共同使用。

>   虚拟性：把一个物理实体变为若干个逻辑上的对应物。

>   异步性：由于进程并发运行，使得每个进程经多个间隔分多次完成。

请给出你觉得的更准确的操作系统的定义？

>   操作系统是用户和计算机、硬件和软件的接口，是最基本、最底层的系统软件，支持其他所有应用软件。操作系统管理硬件、软件、数据等，控制程序运行，提供用户界面，方便人机交互，让计算机系统所有资源最大限度地发挥作用，实现了并发性、共享性、虚拟性、异步性。

你希望从操作系统课学到什么知识？

>   希望了解不同操作系统的优缺点，了解操作系统的本质，了解操作系统很多基本功能的实现思想，并且能够实现一些简单的操作系统性质等等。

什么是操作系统？

>   操作系统是管理计算机硬件和软件资源的计算机程序，同时也是计算机系统的内核与基石。还有一种解释说操作系统是一个控制程序，是一个软件系统，给用户提供一个运行的环境，也包括一个让用户与系统交互的操作界面。

操作系统内核有什么特征？

>   整体式结构，极简化，抽象化。

操作系统面临什么挑战？

>   改进为更省电、网络化、易用、华丽的用户界面。

同学们用过什么操作系统？如何评价这些系统？

>   Linux：开源，免费，安全。命令行操作，适合程序员使用。

>   Windows：界面美观，操作方便，兼容性好。

>   Mac OS：流畅，美观，人性化，易于操作，比较封闭。

>   iOS：流畅，美观，人性化，易于操作，但是非常封闭，只支持AppStore里面的应用程序。

>   Android：开放性好。

你所知道的操作系统技术有什么？哪些是操作系统特有的？

>   进程管理，内存管理，文件系统，网络通信，安全机制，用户界面，驱动程序。

什么是操作系统内核？什么是微内核？什么是外核（Exokernel）？

>   操作系统内核是一个电脑程序，用来管理软件发出的数据I/O（输入与输出）要求，将这些要求转译为数据处理的指令，交由中央处理器（CPU）及电脑中其他电子组件进行处理。内核是现代操作系统中最基本的部分。

>   微内核是内核的精简版本，能够提供必要服务，如任务、线程、交互进程通信及内存管理等。它设计成在很小的内存空间内增加移植性，提供模块化设计，以使用户安装不同的接口。

>   外核是一种极简化的微内核。唯一工作就是负责分配系统资源，并防止使用者行程存取到其他行程的资源。

你理解的虚拟化是什么？

>   将一台计算机虚拟成多台逻辑计算机。

---

## 小组讨论题

---

目前的台式PC机标准配置和价格？

> CPU：双核，64位，主频3200MHz，价格约500元

> 主板：价格约500元

> 显卡：HD 高清版，价格约600元

> 内存：与主板参数相关，4GB，价格约300元

> 硬盘：320GB，价格约300元

> 显示器：液晶，19英寸，价格约1500元

你理解的命令行接口和GUI接口具有哪些共性和不同的特征？

> 共性：都是用户和计算机交互的接口

> 不同：命令行速度更快；GUI更人性化，人机交互性更强

为什么现在的操作系统基本上用C语言来实现？

>  最早开发操作系统时运用C语言，一直延续下来。

>  C语言中各种脱离系统的库最丰富、最完整，C语言用来开发操作系统的工具最多。

>  使用C语言的开发者非常之多。

>  C语言可以和汇编语言很好地进行对应，而使用汇编语言编程太痛苦……

为什么没有人用python，java来实现操作系统？

>  python和java都不易嵌入汇编。它们的库无法修改。

请评价用C++来实现操作系统的利弊？

>  C++比C更方便编程者。然而C++的兼容性不好，混合编译时符号表会比较麻烦。C++运行效率比C低，而且当C++作为面向对象语言编程时，不符合操作系统开发的要求，不能使用。

---

## 开放思考题

---

请评价微内核、单体内核、外核（exo-kernel）架构的操作系统的利弊？

>  微内核将系统服务的实现和系统的基本操作规则分离开，方便完成操作系统中比较高级的操作，使内核中最核心的部分的设计更简单。微内核经常被用于机器人和医疗器械的嵌入式设计中，因为它的系统的关键部分都处在相互分开的，被保护的存储空间中。一个服务组件的失效并不会导致整个系统的崩溃，内核需要做的，仅仅是重新启动这个组件，而不必影响其它的部分。

>  单体内核在同一个地址空间上实现所有复杂的低阶操作，系统控制代码的效率会比在不同地址空间上实现更高些。

>  外核并没有对于硬件做抽象，只提供了比较低级的硬件操作，需要增加额外的运行库支持。

请评价用LISP,OCcaml, GO, D，RUST等实现操作系统的利弊？

>  这些语言的普及率非常低，很多应用程序会无法兼容，推广性会非常受限。
>  效率上不如C，但是如果语言封装良好，开发会相对便利，但也会受到一定的限制。

进程切换的可能实现思路？

>  将当前寄存器中的数据存入当前进程的私有堆栈中，保存当前进程的PC值；读出下一个进程的PC值，将下一个进程私有堆栈中的数据恢复到寄存器中，继续从读出的PC地址开始执行下一个进程。

计算机与终端间通过串口通信的可能实现思路？

>  通过相同的串口通信协议，计算机与终端之间通过状态位设置读写状态，并以指定的频率读写信息。

为什么微软的Windows没有在手机终端领域取得领先地位？

>  进入智能手机市场的时间过晚，市场已经被iOS和Android瓜分。
>  在用户体验方面没有明显优势，也没有能够吸引足够的第三方开发者。

你认为未来（10年内）的操作系统应该具有什么样的特征和功能？

>  更加开放，兼容更多平台尤其是移动平台，易于使用，支持云服务，便于备份恢复，界面友好。

---

## v9-cpu相关题目
---

在v9-cpu中如何实现时钟中断的?
> 1. 通过TIME指令这是timeout的数值，设置为零则不会计时
> 2. 然后timer增长达到timeout的数值的时候激发时钟中断，并重新开始计时
> 3. 中断标签FTIMER，设置trap处理中断

v9-cpu指令，关键变量描述有误或不全的情况?
> 1. ssp: 内核态的栈指针
> 2. usp: 用户态的栈指针
> 3. cycle: 指令周期
> 4. xcycle: ?
> 5. timer: 用于时钟中断
> 6. timeout: 用于时钟中断

在v9-cpu中的跳转相关操作是如何实现的?
> 1. JMP/JMPI指令在xpc基础上加上oper0作为目标位置跳转
> 2. JSR/JSRA指令先在栈中保存当前的pc值，再跳转到oper0或者pc+oper0或者其他指定位置
> 3. Branch类的指令，首先进行条件判断，根据判断结果进行跳转

在v9-cpu中如何设计相应指令，可有效实现函数调用与返回?
> 1. 调用函数时将所有参与压入栈底，函数调用时，通过在sp+8/+12等获得参数
> 2. 函数执行完毕，将返回值存入寄存器a，跳转回预先存好的返回地址sp+4，并恢复原函数寄存器和栈指针

emhello/os0/os1等程序被加载到内存的哪个位置,其堆栈是如何设置的?
> 程序被加载到内存的起始处；

在v9-cpu中如何实现分页机制；
> 虚拟地址前十位为page table，中间十位为page table中的一项，最后十二位是页内的偏移 

请编写一个小程序，在v9-cpu下，能够接收你输入的字符并输出你输入的字符

>  https://github.com/JingqingZ/v9-cpu/blob/master/root/usr/typein.c

请编写一个小程序，在v9-cpu下，能够产生各种异常/中断

>  https://github.com/JingqingZ/v9-cpu/blob/master/root/usr/inter.c

请编写一个小程序，在v9-cpu下，能够统计并显示内存大小

>  https://github.com/JingqingZ/v9-cpu/blob/master/root/usr/memsize.c
